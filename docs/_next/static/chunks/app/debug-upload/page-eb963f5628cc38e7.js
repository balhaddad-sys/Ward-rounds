(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[850],{825:function(e,t,s){Promise.resolve().then(s.bind(s,6774))},6774:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return r}});var l=s(7437),a=s(2265);function r(){let[e,t]=(0,a.useState)(null),[s,r]=(0,a.useState)(!1),o=async()=>{r(!0);let e={},s=localStorage.getItem("medward_token");e.hasToken=!!s,e.token=s?"".concat(s.substring(0,20),"..."):"Not set";try{let t=await fetch("/api/auth/verify",{headers:{Authorization:"Bearer ".concat(s)}});e.apiConnected=200===t.status,e.authStatus=t.status}catch(t){e.apiConnected=!1,e.apiError=t.message}try{let t=await fetch("/api/documents/upload");e.uploadEndpointExists=404!==t.status}catch(t){e.uploadEndpointExists=!1}let l=JSON.parse(localStorage.getItem("medward_reports")||"[]");e.localReportsCount=l.length,e.latestReport=l[0]?{id:l[0].id,type:l[0].type,hasInterpretation:!!l[0].interpretation,createdAt:l[0].createdAt}:null,t(e),r(!1)};return(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,l.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"\uD83D\uDD0D MedWard Diagnostics"}),(0,l.jsxs)("div",{className:"mb-6 bg-yellow-50 border-2 border-yellow-200 rounded-xl p-4",children:[(0,l.jsx)("h2",{className:"font-bold text-yellow-900 mb-2",children:"⚠️ Important: API Keys Required"}),(0,l.jsxs)("p",{className:"text-yellow-800 text-sm",children:["For the system to work, you need to add your API keys to ",(0,l.jsx)("code",{className:"bg-yellow-200 px-2 py-1 rounded",children:".env.local"}),":"]}),(0,l.jsxs)("ul",{className:"mt-3 text-sm text-yellow-800 space-y-1",children:[(0,l.jsxs)("li",{children:["• ",(0,l.jsx)("strong",{children:"OPENAI_API_KEY"})," - Get from ",(0,l.jsx)("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener",className:"underline",children:"platform.openai.com/api-keys"})]}),(0,l.jsxs)("li",{children:["• ",(0,l.jsx)("strong",{children:"GOOGLE_CLOUD_CREDENTIALS"})," - Optional, for better OCR (or use Tesseract.js fallback)"]})]})]}),(0,l.jsx)("button",{onClick:o,disabled:s,className:"w-full py-4 bg-blue-600 text-white rounded-xl font-bold text-lg hover:bg-blue-700 transition-colors disabled:opacity-50 mb-6",children:s?"Running Diagnostics...":"Run Diagnostics"}),e&&(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Results:"}),(0,l.jsx)(n,{label:"Authentication Token",status:e.hasToken,value:e.token}),(0,l.jsx)(n,{label:"API Connectivity",status:e.apiConnected,value:"Status: ".concat(e.authStatus||"Error"),error:e.apiError}),(0,l.jsx)(n,{label:"Upload Endpoint",status:e.uploadEndpointExists,value:"POST /api/documents/upload"}),(0,l.jsx)(n,{label:"Local Reports",status:e.localReportsCount>0,value:"".concat(e.localReportsCount," reports stored")}),e.latestReport&&(0,l.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 border-2 border-gray-200",children:[(0,l.jsx)("h3",{className:"font-bold mb-2",children:"Latest Report:"}),(0,l.jsx)("pre",{className:"text-xs bg-white p-3 rounded overflow-x-auto",children:JSON.stringify(e.latestReport,null,2)})]})]}),(0,l.jsxs)("div",{className:"mt-8 p-4 bg-blue-50 rounded-xl border-2 border-blue-200",children:[(0,l.jsx)("h3",{className:"font-bold text-blue-900 mb-2",children:"Quick Test Steps:"}),(0,l.jsxs)("ol",{className:"text-sm text-blue-800 space-y-2",children:[(0,l.jsx)("li",{children:"1. Add your OpenAI API key to .env.local"}),(0,l.jsxs)("li",{children:["2. Restart the dev server: ",(0,l.jsx)("code",{className:"bg-blue-200 px-2 py-1 rounded",children:"npm run dev"})]}),(0,l.jsxs)("li",{children:["3. Go to ",(0,l.jsx)("a",{href:"/login",className:"underline",children:"/login"})," and log in"]}),(0,l.jsxs)("li",{children:["4. Go to ",(0,l.jsx)("a",{href:"/scanner",className:"underline",children:"/scanner"})," and upload a test image"]}),(0,l.jsx)("li",{children:"5. Check browser console (F12) for detailed logs"})]})]})]})})})}function n(e){let{label:t,status:s,value:a,error:r}=e;return(0,l.jsxs)("div",{className:"p-4 rounded-xl border-2 ".concat(s?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"font-semibold",children:t}),(0,l.jsx)("span",{className:"text-2xl",children:s?"✅":"❌"})]}),(0,l.jsx)("p",{className:"text-sm mt-2 ".concat(s?"text-green-700":"text-red-700"),children:a}),r&&(0,l.jsxs)("p",{className:"text-xs text-red-600 mt-1",children:["Error: ",r]})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=825)}),_N_E=e.O()}]);
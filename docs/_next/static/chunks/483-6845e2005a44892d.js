"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[483],{6962:function(e,n,t){t.d(n,{yK:function(){return r}});let a={NETWORK:"NETWORK",CORS:"CORS",TIMEOUT:"TIMEOUT",SERVER_ERROR:"SERVER_ERROR",RATE_LIMIT:"RATE_LIMIT",PARSE_ERROR:"PARSE_ERROR",VALIDATION:"VALIDATION",UNKNOWN:"UNKNOWN"},o="medward_login_failures";async function i(){let e={online:"undefined"==typeof navigator||navigator.onLine,effectiveType:"unknown",downlink:null,rtt:null};if("undefined"!=typeof navigator&&navigator.connection){let n=navigator.connection;e.effectiveType=n.effectiveType||"unknown",e.downlink=n.downlink||null,e.rtt=n.rtt||null}return e}async function r(e){var n,t,r;let{error:l,response:u=null,url:d,requestOptions:c,username:g=null,timing:m={}}=e,f=m.start||Date.now(),R=Date.now(),v=R-f,h=(r={duration:v},l.message.includes("CORS")||l.message.includes("Cross-Origin")||"TypeError"===l.name&&!u?a.CORS:l.message.includes("Failed to fetch")||l.message.includes("NetworkError")||l.message.includes("Network request failed")||"TypeError"===l.name&&l.message.includes("fetch")?a.NETWORK:l.message.includes("timeout")||l.message.includes("aborted")||r&&r.duration>3e4?a.TIMEOUT:(null==u?void 0:u.status)===429||l.message.includes("Too many requests")||l.message.includes("rate limit")?a.RATE_LIMIT:(null==u?void 0:u.status)>=500?a.SERVER_ERROR:"SyntaxError"===l.name||l.message.includes("JSON")||l.message.includes("parse")?a.PARSE_ERROR:(null==u?void 0:u.status)===400||l.message.includes("validation")||l.message.includes("invalid")?a.VALIDATION:a.UNKNOWN),y=await i(),w={userAgent:navigator.userAgent,platform:navigator.platform,language:navigator.language,cookiesEnabled:navigator.cookieEnabled,doNotTrack:navigator.doNotTrack,screenResolution:"".concat(window.screen.width,"x").concat(window.screen.height),viewport:"".concat(window.innerWidth,"x").concat(window.innerHeight),timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone,timestamp:new Date().toISOString(),localTime:new Date().toLocaleString()},E={url:d,method:(null==c?void 0:c.method)||"GET",headers:(null==c?void 0:c.headers)?Object.keys(c.headers):[],hasBody:!!(null==c?void 0:c.body),bodySize:(null==c?void 0:c.body)?c.body.length:0,credentials:(null==c?void 0:c.credentials)||"omit",mode:(null==c?void 0:c.mode)||"cors",cache:(null==c?void 0:c.cache)||"default"},S={id:"failure_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),timestamp:new Date().toISOString(),category:h,error:{message:l.message,name:l.name,stack:l.stack,cause:null===(n=l.cause)||void 0===n?void 0:n.message},response:u?{status:u.status,statusText:u.statusText,headers:Object.fromEntries((null===(t=u.headers)||void 0===t?void 0:t.entries())||[]),ok:u.ok,redirected:u.redirected,type:u.type,url:u.url}:null,request:E,timing:{duration:v,start:f,end:R},network:y,environment:w,user:{username:g,hadPreviousToken:"undefined"!=typeof localStorage&&!!localStorage.getItem("medward_token")}};!function(e){if("undefined"!=typeof localStorage)try{let n=localStorage.getItem(o),t=n?JSON.parse(n):[];t.push(e),t.length>50&&t.shift(),localStorage.setItem(o,JSON.stringify(t)),console.info("[FailureAnalyzer] Captured failure:",e.id)}catch(e){console.error("[FailureAnalyzer] Storage error:",e)}}(S);try{await s(S)}catch(e){console.warn("[FailureAnalyzer] Could not send to server:",e.message)}return S}async function s(e){if(window.location.hostname.includes("github.io")){console.info("[FailureAnalyzer] Static deployment detected, skipping server logging");return}fetch("/api/analytics/login-failures",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),keepalive:!0}).catch(e=>{console.warn("[FailureAnalyzer] Server logging failed:",e.message)})}},9376:function(e,n,t){var a=t(5475);t.o(a,"useRouter")&&t.d(n,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(n,{useSearchParams:function(){return a.useSearchParams}})}}]);